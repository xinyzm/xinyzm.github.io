<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Fiddler 抓包姿势小结</title>
      <link href="/Fiddler%E6%8A%93%E5%8C%85%E5%A7%BF%E5%8A%BF%E5%B0%8F%E7%BB%93/"/>
      <url>/Fiddler%E6%8A%93%E5%8C%85%E5%A7%BF%E5%8A%BF%E5%B0%8F%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>在 Web 应用中调试代码比较容易，可以使用各大浏览器的开发者工具进行调试，但是在移动设备上调试代码就可能会受限。抓包工具就很好的打破了这个局限，无论是网页应用还是移动应用，都有用武之地。Windows 系统下有 <strong>Fiddler</strong>，Mac 系统下有 <strong>Charles</strong>，它们大体类似，在这里我们只对 Fiddler 的使用做一个介绍</p><p>在开始之前请自行下载 <a href="https://www.telerik.com/download/fiddler" target="_blank" rel="noopener">Fiddler</a> ，那就话不多少，直接上才艺 …</p><h2 id="基础篇-实现移动设备抓包"><a href="#基础篇-实现移动设备抓包" class="headerlink" title="基础篇 - 实现移动设备抓包"></a>基础篇 - 实现移动设备抓包</h2><h3 id="配置-Fiddler-代理"><a href="#配置-Fiddler-代理" class="headerlink" title="配置 Fiddler 代理"></a>配置 Fiddler 代理</h3><p>（1）打开菜单栏的 Tools，选择第一项 Options</p><p>（2）在弹出的对话框切换至 Connections 选项，配置 Fiddler 的监听端口，勾选 “Allow romote computers to connect” 以允许连接远程设备，配置完成后点击 OK 按钮</p><p><img src="配置Fiddler代理.png" alt="配置Fiddler代理"></p><p>（3）配置成功后就相当于把本机作为服务器，在你设置的端口下开启了一个服务，该服务主要的任务就是监听访问此服务器下的所有请求。另外，鼠标移入右上角的 Online 可查看本机的 IP 地址，此地址在设置移动设备的 HTTP 代理中会使用。</p><h3 id="过滤-IP"><a href="#过滤-IP" class="headerlink" title="过滤 IP"></a>过滤 IP</h3><p>默认情况下，Fiddler 会抓取所有访问的请求，这样可能会对抓取查看目标请求带来一定的视觉干扰，为了避免这样的干扰，可以通过设置过滤器 Filters，只过滤获取需要抓取的 IP 请求，按照下图步骤设置，设置完成后在第5步选择 “Run Filterset now”，这样左侧显出的请求就只有自己需要的请求列表了。</p><p><img src="过滤IP.png" alt="过滤IP"></p><h3 id="以苹果手机为例，设置-HTTP-代理"><a href="#以苹果手机为例，设置-HTTP-代理" class="headerlink" title="以苹果手机为例，设置 HTTP 代理"></a>以苹果手机为例，设置 HTTP 代理</h3><p>（1）抓取移动设备的请求前提是移动设备和配置 Fiddler 代理的设备在同一网段下</p><p>（2）进入 Wi-Fi 界面，点击已接入的 WiFi 名称，进入该网络的设置界面，找到 HTTP 代理项，选择手动模式，输入服务器 IP 和端口（具体 IP 和端口参见1.3），点击存储</p><p><img src="配置HTTP代理.png" alt="配置HTTP代理" style="zoom: 25%;" /></p><h2 id="进阶篇-抓取-Https-请求"><a href="#进阶篇-抓取-Https-请求" class="headerlink" title="进阶篇 - 抓取 Https 请求"></a>进阶篇 - 抓取 Https 请求</h2><h3 id="抓取前的准备（针对已安装-Fiddler-的用户）"><a href="#抓取前的准备（针对已安装-Fiddler-的用户）" class="headerlink" title="抓取前的准备（针对已安装 Fiddler 的用户）"></a>抓取前的准备（针对已安装 Fiddler 的用户）</h3><p>（1）清除 C 盘用户目录里的证书缓存，例如：C:\Users\Administrator\AppData\Roaming\Microsoft\Crypto\RSA，里面的文件全部清除</p><p>（2）清除电脑上的根证书，在运行中输入 certmgr.msc，打开菜单栏的操作按钮，选择查找证书，在包含项输入 fiddler，点击立即查找，将查找结果删除</p><p><img src="清除电脑上的根证书.png" alt="清除电脑上的根证书" style="zoom:80%;" /></p><p>（3）清除移动设备的证书（描述文件）。点击手机上的<strong>设备</strong>图标，选择<strong>通用</strong>，找到<strong>描述文件</strong>项，点击进入，这里就是所有已下载的描述文件的列表，找到带有 FiddlerRoot 字样的描述文件，移除描述文件</p><p>（4）进入谷歌浏览器的设置界面（输入 chrome://settings/ 直接进入），在<strong>隐私设置和安全性</strong>一栏，点击进入<strong>安全</strong>项，找到<strong>管理证书</strong>，清除带有 FiddlerRoot 字样的证书（说明：可能浏览器的版本差异，<strong>管理证书</strong>项的入口存在不同，如存在此情况请自行查找）</p><p><img src="清除浏览器的根证书.png" alt="清除浏览器的根证书"></p><p>（5）打开 Fiddler，打开菜单栏的 Tools，选择第一项 Options，在弹出的对话框切换至 HTTPS 选项，点击 Actions，选择最后一项 “Reset All certificates”，然后关闭 Fiddler。</p><h3 id="配置-Fiddler-支持-HTTPS"><a href="#配置-Fiddler-支持-HTTPS" class="headerlink" title="配置 Fiddler 支持 HTTPS"></a>配置 Fiddler 支持 HTTPS</h3><p>（1）打开菜单栏的 Tools，选择第一项 Options</p><p>（2）在弹出的对话框切换至 HTTPS 选项，如下图勾选相应项</p><p><img src="配置HTTPS代理.png" alt="配置HTTPS代理"></p><h3 id="抓取移动设备的-Https-请求（以苹果手机为例）"><a href="#抓取移动设备的-Https-请求（以苹果手机为例）" class="headerlink" title="抓取移动设备的 Https 请求（以苹果手机为例）"></a>抓取移动设备的 Https 请求（以苹果手机为例）</h3><p>（1）Fiddler 默认生成的证书不能满足 Android 和 iOS 系统的要求，下载 <a href="https://www.telerik.com/fiddler/add-ons" target="_blank" rel="noopener">CertMaker</a> 插件到本地，双击安装以生成支持移动设备的证书</p><p><img src="下载支持移动设备的插件.png" alt="下载支持移动设备的插件"></p><p>（2）配置支持 HTTPS（详参步骤2），点击 OK 按钮，期间会出现一些提示，默认都选 yes</p><p>（3）在 Safari 浏览器上输入服务器 IP 和端口，点击 FiddlerRoot certificate 链接下载 Fiddler 证书</p><p><img src="移动设备下载证书.png" alt="移动设备下载证书" style="zoom:25%;" /></p><p>（4）安装下载的描述文件（Fiddler 证书），将描述文件启用完全信任。点击手机上的<strong>设备</strong>图标，选择<strong>通用</strong>，找到<strong>关于本机</strong>项，点击进入，在最下面的<strong>证书信任设置</strong>里面找到带有 FiddlerRoot 字样的描述文件启用完全信任。设置完成后就可以抓取 Https 的请求了</p><h3 id="抓取浏览器的-Https-请求（以谷歌浏览器为例）"><a href="#抓取浏览器的-Https-请求（以谷歌浏览器为例）" class="headerlink" title="抓取浏览器的 Https 请求（以谷歌浏览器为例）"></a>抓取浏览器的 Https 请求（以谷歌浏览器为例）</h3><p>（1）配置支持 HTTPS（详参步骤2），点击 Actions，选择第二项 “Export Root Certificate to Desktop”，在桌面会产生 “FiddlerRoot.cer” 的证书文件，点击 OK 按钮，期间会出现一些提示，默认都选 yes</p><p>（2）进入谷歌浏览器的设置界面（输入 chrome://settings/ 直接进入），在<strong>隐私设置和安全性</strong>一栏，点击进入<strong>安全</strong>项，找到<strong>管理证书</strong>，将刚才产生的证书文件导入</p><p><img src="浏览器导入证书.png" alt="浏览器导入证书"></p><p>（3）重新打开 Fiddler，就可以抓取 Https 的请求了</p>]]></content>
      
      
      <categories>
          
          <category> 开发技巧 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Fiddler </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkins 和 Gitlab 配合执行项目任务</title>
      <link href="/Jenkins%E5%92%8CGitlab%E9%85%8D%E5%90%88%E6%89%A7%E8%A1%8C%E9%A1%B9%E7%9B%AE%E4%BB%BB%E5%8A%A1/"/>
      <url>/Jenkins%E5%92%8CGitlab%E9%85%8D%E5%90%88%E6%89%A7%E8%A1%8C%E9%A1%B9%E7%9B%AE%E4%BB%BB%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h3 id="在-Gitlab-创建-git-项目"><a href="#在-Gitlab-创建-git-项目" class="headerlink" title="在 Gitlab 创建 git 项目"></a>在 Gitlab 创建 git 项目</h3><h3 id="使用-sshkey-命令创建一对-ssh-公私钥，用于-deploy"><a href="#使用-sshkey-命令创建一对-ssh-公私钥，用于-deploy" class="headerlink" title="使用 sshkey 命令创建一对 ssh 公私钥，用于 deploy"></a>使用 sshkey 命令创建一对 ssh 公私钥，用于 deploy</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -b 4096 -C &quot;youremail@xxx.com&quot; -f &quot;sshkey_filename&quot;</span><br></pre></td></tr></table></figure><h3 id="在-Jenkins-中添加-ssh-私钥凭据"><a href="#在-Jenkins-中添加-ssh-私钥凭据" class="headerlink" title="在 Jenkins 中添加 ssh 私钥凭据"></a>在 Jenkins 中添加 ssh 私钥凭据</h3><p>（1）选择凭据 - 系统 - 全局凭据 - 添加凭据</p><p><img src="添加凭据-1.jpg" alt="添加凭据-1"></p><p>（2）选择类型 <strong>SSH Username with private key</strong>，填写用户名和 ssh 私钥，如果生成公私钥的时候设置了 passphrase 就填写，否则不填</p><p><img src="填写凭证-2.jpg" alt="填写凭证-2"></p><h3 id="在-Gitlab-中配置-Deploy-Keys（添加-ssh-公钥）"><a href="#在-Gitlab-中配置-Deploy-Keys（添加-ssh-公钥）" class="headerlink" title="在 Gitlab 中配置 Deploy Keys（添加 ssh 公钥）"></a>在 Gitlab 中配置 Deploy Keys（添加 ssh 公钥）</h3><p>（1） 此步骤的前提是你拥有这个 git 项目的管理权限</p><p>（2） 选择 git 项目 - 设置 - 仓库 - Deploy Keys ，填写 ssh 公钥，保存</p><p><img src="配置deploy keys.jpg" alt="配置deploy keys"></p><p>（3）激活新增的 deploy key </p><p><img src="激活deploy key.jpg" alt="激活deploy key"></p><h3 id="在-Jenkins-中新建任务"><a href="#在-Jenkins-中新建任务" class="headerlink" title="在 Jenkins 中新建任务"></a>在 Jenkins 中新建任务</h3><h3 id="配置任务-源码管理"><a href="#配置任务-源码管理" class="headerlink" title="配置任务 - 源码管理"></a>配置任务 - 源码管理</h3><p>（1） 选择 Git</p><p>（2） 设置仓库地址，仓库地址从 Gitlab 中获取</p><p>（3） 凭据选择你刚才使用 ssh 私钥添加的凭据</p><p>（4） 指定分支，建议设置成 master</p><p>（5） 如果需要部署的项目目录不是根目录，通过 Additional Behaviours -&gt; Sparse Checkout paths（安装 Git Parameter 插件） -&gt; Path 设置</p><p><img src="配置任务-源码管理.jpg" alt="配置任务-源码管理"></p><h3 id="配置任务-构建触发器"><a href="#配置任务-构建触发器" class="headerlink" title="配置任务 - 构建触发器"></a>配置任务 - 构建触发器</h3><p>（1）勾选 Build when a change is pushed to Gitlab.</p><p>（2）查看 Jenkins 的 webhooks 的地址，点击高级按钮，生成 Secret token</p><p><img src="获取webhooks地址.jpg" alt="获取webhooks地址"><img src="生成Secret token.jpg" alt="生成Secret token"></p><p>（3） 选择 git 项目 - 设置 - 集成 ，填写 Webhooks 的 URL 和 Secret Token，取消勾选 Enable SSL verification</p><p><img src="填写webhooks和token.jpg" alt="填写webhooks和token"></p><h3 id="配置任务-构建"><a href="#配置任务-构建" class="headerlink" title="配置任务 - 构建"></a>配置任务 - 构建</h3><p>（1） 增加构建步骤 - 执行 shell </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo 'Hello World!'</span><br></pre></td></tr></table></figure><h3 id="在-Gitlab-进行测试"><a href="#在-Gitlab-进行测试" class="headerlink" title="在 Gitlab 进行测试"></a>在 Gitlab 进行测试</h3><p>（1）选择 git 项目 - 设置 - 集成，在新创建的 Webhooks 下，点击 Test，选择 Push events</p><p>（2） 在 Jenkins 中查看新创建的任务是否正确执行并打印 <strong>Hello World!</strong></p>]]></content>
      
      
      <categories>
          
          <category> 运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos 安装 jdk+tomcat+mysql</title>
      <link href="/Centos%E5%AE%89%E8%A3%85jdk-tomcat-mysql/"/>
      <url>/Centos%E5%AE%89%E8%A3%85jdk-tomcat-mysql/</url>
      
        <content type="html"><![CDATA[<h3 id="安装-jdk1-8"><a href="#安装-jdk1-8" class="headerlink" title="安装  jdk1.8"></a>安装  jdk1.8</h3><p>（1）前往 <a href="https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html" target="_blank" rel="noopener">Oracle 官网</a>，选择下载 <strong>xxx-linux-xxx.tar.gz</strong> 压缩包到本地（以 jdk-8u152-linux-x64.tar.gz 为例）</p><p>（2）使用 <strong><a href="https://filezilla-project.org/" target="_blank" rel="noopener">filezilla</a></strong> 将下载的 jdk 压缩包上传至 Linux 系统下（/home/java/jdk-8u152-linux-x64.tar.gz）</p><p>（3）解压 jdk 到当前目录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf jdk-8u152-linux-x64.tar.gz</span><br></pre></td></tr></table></figure><p>（4）配置 jdk 的环境变量</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将以下配置放在文件最后</span></span><br><span class="line">export JAVA_HOME=/home/java/jdk-8u152-linux-x64</span><br><span class="line">export JRE_HOME=/home/java/jdk-8u152-linux-x64/jre</span><br><span class="line">export CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib:$JRE_HOME/lib</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin</span><br></pre></td></tr></table></figure><p>（5）执行上述文件，使其生效</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>（6）查看 java 版本，验证是否安装成功</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><h3 id="安装-tomcat8-5"><a href="#安装-tomcat8-5" class="headerlink" title="安装  tomcat8.5"></a>安装  tomcat8.5</h3><p>（1）前往 <a href="https://tomcat.apache.org/download-80.cgi" target="_blank" rel="noopener">Apache Tomcat</a>，选择下载 <strong>Core - tar.gz</strong> 压缩包到本地（以 apache-tomcat-8.5.24.tar.gz 为例），如下图</p><p><img src="tomcat下载.png" alt="tomcat下载"></p><p>（2）使用 <strong><a href="https://filezilla-project.org/" target="_blank" rel="noopener">filezilla</a></strong> 将下载的 tomcat 压缩包上传至 Linux 系统下（/home/tomcat/apache-tomcat-8.5.24.tar.gz）</p><p>（3）解压 tomcat 到当前目录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf apache-tomcat-8.5.24.tar.gz</span><br></pre></td></tr></table></figure><p>（4）启动和关闭 tomcat</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 启动 tomcat</span></span><br><span class="line">./home/tomcat/apache-tomcat-8.5.24/bin/startup.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭 tomcat</span></span><br><span class="line">./home/tomcat/apache-tomcat-8.5.24/bin/shutdown.sh</span><br></pre></td></tr></table></figure><h3 id="安装-mysql5-7"><a href="#安装-mysql5-7" class="headerlink" title="安装  mysql5.7"></a>安装  mysql5.7</h3><p>（1）前往 <a href="https://downloads.mysql.com/archives/community/" target="_blank" rel="noopener">MySQL官网</a>，选择如下图所示的 mysql 版本下载到本地（以 mysql-5.7.29-linux-glibc2.12-x86_64.tar.gz 为例）</p><p><img src="mysql下载.png" alt="mysql下载"></p><p>（2）使用 <strong><a href="https://filezilla-project.org/" target="_blank" rel="noopener">filezilla</a></strong> 将下载的 mysql 压缩包上传至 Linux 系统下（/home/mysql/mysql-5.7.29-linux-glibc2.12-x86_64.tar.gz）</p><p>（3）解压 mysql 到 <strong>/usr/local/mysql</strong> 目录下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf mysql-5.7.29-linux-glibc2.12-x86_64.tar.gz -C /usr/local/mysql/</span><br></pre></td></tr></table></figure><p>（4）添加系统组和用户</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd mysql</span><br><span class="line">useradd -r -g mysql -s /bin/false mysql</span><br></pre></td></tr></table></figure><p>（5）修改 mysql 目录拥有者为 mysql 用户</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/mysql</span><br><span class="line">chown -R mysql:mysql ./</span><br></pre></td></tr></table></figure><p>（6）数据库初始化，并且保存最后生成的密码</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/mysql/bin</span><br><span class="line">./mysqld --initialize --datadir=/usr/local/mysql/data --user=mysql --basedir=/usr/local/mysql</span><br></pre></td></tr></table></figure><p>（7）修改 data 目录拥有者为 mysql 用户</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R mysql:mysql data</span><br></pre></td></tr></table></figure><p>（8）复制启动文件到服务文件夹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp support-files/mysql.server /etc/init.d/mysql</span><br></pre></td></tr></table></figure><p>（9）启动 mysql 服务，并设置开机自启动</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service mysql start</span><br><span class="line">systemctl enable mysql</span><br></pre></td></tr></table></figure><p>（10）添加 mysql 软连接</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/mysql/bin/mysql /usr/local/bin/mysql</span><br></pre></td></tr></table></figure><p>（11）登录 mysql，密码是在第六步生成的</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure><p>（12）修改 root 密码，并且开发权限使用 navicat 可以连接 mysql</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 修改root密码</span></span><br><span class="line">ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '123456';</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 赋予root用户远程连接权限</span></span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '123456' WITH GRANT OPTION;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 刷新权限</span></span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
